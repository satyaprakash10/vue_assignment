{"ast":null,"code":"import _objectSpread from \"/Users/shivamvarma/Project/web/vue_assignment/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { HomeIcon } from '@heroicons/vue/solid';\nimport { mapActions, mapGetters } from 'vuex';\nimport axios from 'axios';\nexport default {\n  components: {\n    HomeIcon: HomeIcon\n  },\n  data: function data() {\n    return {\n      pages: [{\n        name: 'Projects',\n        href: '#',\n        current: false\n      }, {\n        name: 'Project Nero',\n        href: '#',\n        current: true\n      }],\n      headers: [{\n        text: 'Image',\n        align: 'start',\n        sortable: false,\n        value: 'image'\n      }, {\n        text: 'Name',\n        value: 'name'\n      }, {\n        text: 'Mobile',\n        value: 'mobile'\n      }, {\n        text: 'Email',\n        value: 'email'\n      }, {\n        text: 'Address',\n        value: 'address'\n      }, {\n        text: 'Actions',\n        value: 'actions'\n      }]\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['getAllUsers'])),\n  mounted: function mounted() {\n    var _this = this;\n\n    this.fetchAllUsers();\n\n    if (this.getAllUsers) {\n      axios.get('http://localhost:3000/users').then(function (res) {\n        if (res) {\n          _this.initMap(res.data);\n        }\n      });\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions(['fetchAllUsers', 'deleteUser'])), {}, {\n    initMap: function initMap(users) {\n      var _this2 = this;\n\n      mapboxgl.accessToken = 'pk.eyJ1IjoiaGFzaWkiLCJhIjoiY2wwYWt4cjJ1MDF4YTNjbWptNzZwM2ZhZyJ9.9WUVDkgiL5lsqX95u0VAvA';\n      var map = new mapboxgl.Map({\n        container: 'map',\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [-120.094292506456, 48.0250054263],\n        zoom: 10\n      });\n      var features = [];\n\n      for (var index = 0; index < users.length; index++) {\n        var element = users[index];\n        features.push({\n          type: 'Feature',\n          properties: {\n            description: \"\\n             <div class=\\\"flex justify-between space-x-4\\\">\\n               <img src=\\\"\".concat(element.image, \"\\\" class=\\\"w-10 h-10\\\" />\\n               <div>\\n                 <strong> \").concat(element.name, \"  </strong>\\n                 <p> \").concat(element.address, \" </p>\\n               </div>\\n             </div>\\n           \"),\n            property: element\n          },\n          geometry: {\n            type: 'Point',\n            coordinates: element.coordinates\n          }\n        });\n      }\n\n      map.on('load', function () {\n        map.addSource('places', {\n          type: 'geojson',\n          data: {\n            type: 'FeatureCollection',\n            features: features\n          }\n        }); // Add a marker on map to show the user details\n\n        map.addLayer({\n          id: 'places',\n          type: 'circle',\n          source: 'places',\n          paint: {\n            'circle-color': '#4264fb',\n            'circle-radius': 8,\n            'circle-stroke-width': 2,\n            'circle-stroke-color': '#ffffff'\n          }\n        });\n        var popup = new mapboxgl.Popup({\n          closeButton: false,\n          closeOnClick: false\n        });\n        map.on('mouseenter', 'places', function (e) {\n          map.getCanvas().style.cursor = 'pointer'; // Copy coordinates array.\n\n          var coordinates = e.features[0].geometry.coordinates.slice();\n          var description = e.features[0].properties.description;\n\n          while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n          }\n\n          popup.setLngLat(coordinates).setHTML(description).addTo(map);\n        });\n        map.on('mouseleave', 'places', function () {\n          map.getCanvas().style.cursor = '';\n          popup.remove();\n        });\n        map.on('click', 'places', function (e) {\n          _this2.show = true;\n          _this2.selectedProperty = JSON.parse(e.features[0].properties.property);\n        });\n        map.addSource('states', {\n          type: 'geojson',\n          data: 'https://docs.mapbox.com/mapbox-gl-js/assets/us_states.geojson'\n        });\n      });\n    },\n    removeUser: function removeUser(id) {\n      var _this3 = this;\n\n      this.deleteUser(id).then(function () {\n        _this3.$toastr.s('User deleted successfully');\n      }).catch(function (err) {\n        _this3.$toastr.e(err.response.data);\n      });\n    }\n  })\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACAA;AACAC;AADA,GADA;AAIAC;AAAA;AACAC,cACA;AAAAC;AAAAC;AAAAC;AAAA,OADA,EAEA;AAAAF;AAAAC;AAAAC;AAAA,OAFA,CADA;AAKAC,gBACA;AACAC,qBADA;AAEAC,sBAFA;AAGAC,uBAHA;AAIAC;AAJA,OADA,EAOA;AAAAH;AAAAG;AAAA,OAPA,EAQA;AAAAH;AAAAG;AAAA,OARA,EASA;AAAAH;AAAAG;AAAA,OATA,EAUA;AAAAH;AAAAG;AAAA,OAVA,EAWA;AAAAH;AAAAG;AAAA,OAXA;AALA;AAAA,GAJA;AAwBAC,8BACAC,2BADA,CAxBA;AA4BAC,SA5BA,qBA4BA;AAAA;;AACA;;AACA;AACAC;AACA;AACA;AACA;AACA,OAJA;AAKA;AACA,GArCA;AAuCAC,2CACAC,2CADA;AAGAC,WAHA,mBAGAC,KAHA,EAGA;AAAA;;AACAC,6BACA,wFADA;AAGA;AACAC,wBADA;AAEAC,mDAFA;AAGAC,kDAHA;AAIAC;AAJA;AAOA;;AAEA;AACA;AACAC;AACAC,yBADA;AAEAC;AACAC,4HAEAC,aAFA,wFAIAA,YAJA,+CAKAA,eALA,mEADA;AAUAC;AAVA,WAFA;AAcAC;AACAL,yBADA;AAEAM;AAFA;AAdA;AAmBA;;AAEAC;AACAA;AACAP,yBADA;AAEAxB;AACAwB,qCADA;AAEAD;AAFA;AAFA,WADA,CASA;;AAEAQ;AACAC,sBADA;AAEAR,wBAFA;AAGAS,0BAHA;AAIAC;AACA,qCADA;AAEA,8BAFA;AAGA,oCAHA;AAIA;AAJA;AAJA;AAYA;AACAC,4BADA;AAEAC;AAFA;AAKAL;AACAA,mDADA,CAGA;;AACA;AACA;;AAEA;AACAD;AACA;;AAEAO;AACA,SAZA;AAcAN;AACAA;AACAM;AACA,SAHA;AAKAN;AACA;AACA;AACA,SAHA;AAKAA;AACAP,yBADA;AAEAxB;AAFA;AAIA,OAxDA;AAyDA,KAhGA;AAkGAsC,cAlGA,sBAkGAN,EAlGA,EAkGA;AAAA;;AACA,0BACAO,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAOA;AA1GA;AAvCA","names":["components","HomeIcon","data","pages","name","href","current","headers","text","align","sortable","value","computed","mapGetters","mounted","axios","methods","mapActions","initMap","users","mapboxgl","container","style","center","zoom","features","type","properties","description","element","property","geometry","coordinates","map","id","source","paint","closeButton","closeOnClick","popup","removeUser","then","catch"],"sourceRoot":"src/views/users","sources":["Index.vue"],"sourcesContent":["<template>\n  <div class=\"h-full\">\n    <!-- User breadcrumb  section -->\n    <nav class=\"flex bg-white border-b border-gray-200\" aria-label=\"Breadcrumb\">\n      <ol\n        role=\"list\"\n        class=\"flex w-full max-w-screen-xl px-4 mx-auto space-x-4 sm:px-6 lg:px-8\"\n      >\n        <li class=\"flex\">\n          <div class=\"flex items-center\">\n            <a href=\"#\" class=\"text-gray-400 hover:text-gray-500\">\n              <HomeIcon class=\"flex-shrink-0 w-5 h-5\" aria-hidden=\"true\" />\n              <span class=\"sr-only\">Home</span>\n            </a>\n          </div>\n        </li>\n        <li v-for=\"page in pages\" :key=\"page.name\" class=\"flex\">\n          <div class=\"flex items-center\">\n            <svg\n              class=\"flex-shrink-0 w-6 h-full text-gray-200\"\n              viewBox=\"0 0 24 44\"\n              preserveAspectRatio=\"none\"\n              fill=\"currentColor\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              aria-hidden=\"true\"\n            >\n              <path d=\"M.293 0l22 22-22 22h1.414l22-22-22-22H.293z\" />\n            </svg>\n            <a\n              :href=\"page.href\"\n              class=\"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700\"\n              :aria-current=\"page.current ? 'page' : undefined\"\n              >{{ page.name }}</a\n            >\n          </div>\n        </li>\n      </ol>\n    </nav>\n\n    <!-- User Main content  -->\n    <v-card elevation=\"2\" class=\"p-10\">\n      <v-card-title>\n        <div class=\"flex justify-between\">\n          <span> User Index </span>\n\n          <button\n            type=\"button\"\n            class=\"inline-flex items-center px-3 py-2 text-sm font-medium leading-4 text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n            @click=\"$router.push('/create')\"\n          >\n            Create User\n          </button>\n        </div>\n      </v-card-title>\n\n      <v-card>\n        <v-data-table\n          dense\n          :headers=\"headers\"\n          :items=\"getAllUsers\"\n          hide-default-footer\n          item-key=\"name\"\n          class=\"elevation-1\"\n        >\n          <template v-slot:item.image=\"{ item }\">\n            <img :src=\"item.image\" class=\"w-20 h-20\" alt=\"\" />\n          </template>\n          <template v-slot:item.actions=\"{ item }\">\n            <div class=\"flex items-center justify-between space-x-2\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                class=\"w-6 h-6 text-blue-500 hover:text-blue-400\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                @click=\"$router.push(`/${item.id}`)\"\n              >\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                />\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\n                />\n              </svg>\n\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                class=\"w-6 h-6 text-indigo-500 hover:text-indigo-400\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                @click=\"$router.push(`/${item.id}/edit`)\"\n              >\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                />\n              </svg>\n\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                class=\"w-6 h-6 text-red-500 hover:text-red-400\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                @click=\"removeUser(item.id)\"\n              >\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                />\n              </svg>\n            </div>\n          </template>\n        </v-data-table>\n      </v-card>\n      <div v-if=\"getAllUsers.length\" class=\"mt-5\">\n        <div id=\"map\" style=\"width: 100%; height: 500px\"></div>\n      </div>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport { HomeIcon } from '@heroicons/vue/solid'\nimport { mapActions, mapGetters } from 'vuex'\nimport axios from 'axios'\nexport default {\n  components: {\n    HomeIcon,\n  },\n  data: () => ({\n    pages: [\n      { name: 'Projects', href: '#', current: false },\n      { name: 'Project Nero', href: '#', current: true },\n    ],\n    headers: [\n      {\n        text: 'Image',\n        align: 'start',\n        sortable: false,\n        value: 'image',\n      },\n      { text: 'Name', value: 'name' },\n      { text: 'Mobile', value: 'mobile' },\n      { text: 'Email', value: 'email' },\n      { text: 'Address', value: 'address' },\n      { text: 'Actions', value: 'actions' },\n    ],\n  }),\n\n  computed: {\n    ...mapGetters(['getAllUsers']),\n  },\n\n  mounted() {\n    this.fetchAllUsers()\n    if (this.getAllUsers) {\n      axios.get('http://localhost:3000/users').then((res) => {\n        if (res) {\n          this.initMap(res.data)\n        }\n      })\n    }\n  },\n\n  methods: {\n    ...mapActions(['fetchAllUsers', 'deleteUser']),\n\n    initMap(users) {\n      mapboxgl.accessToken =\n        'pk.eyJ1IjoiaGFzaWkiLCJhIjoiY2wwYWt4cjJ1MDF4YTNjbWptNzZwM2ZhZyJ9.9WUVDkgiL5lsqX95u0VAvA'\n\n      const map = new mapboxgl.Map({\n        container: 'map',\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [-120.094292506456, 48.0250054263],\n        zoom: 10,\n      })\n\n      var features = []\n\n      for (let index = 0; index < users.length; index++) {\n        const element = users[index]\n        features.push({\n          type: 'Feature',\n          properties: {\n            description: `\n             <div class=\"flex justify-between space-x-4\">\n               <img src=\"${element.image}\" class=\"w-10 h-10\" />\n               <div>\n                 <strong> ${element.name}  </strong>\n                 <p> ${element.address} </p>\n               </div>\n             </div>\n           `,\n            property: element,\n          },\n          geometry: {\n            type: 'Point',\n            coordinates: element.coordinates,\n          },\n        })\n      }\n\n      map.on('load', () => {\n        map.addSource('places', {\n          type: 'geojson',\n          data: {\n            type: 'FeatureCollection',\n            features: features,\n          },\n        })\n\n        // Add a marker on map to show the user details\n\n        map.addLayer({\n          id: 'places',\n          type: 'circle',\n          source: 'places',\n          paint: {\n            'circle-color': '#4264fb',\n            'circle-radius': 8,\n            'circle-stroke-width': 2,\n            'circle-stroke-color': '#ffffff',\n          },\n        })\n\n        const popup = new mapboxgl.Popup({\n          closeButton: false,\n          closeOnClick: false,\n        })\n\n        map.on('mouseenter', 'places', (e) => {\n          map.getCanvas().style.cursor = 'pointer'\n\n          // Copy coordinates array.\n          const coordinates = e.features[0].geometry.coordinates.slice()\n          const description = e.features[0].properties.description\n\n          while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360\n          }\n\n          popup.setLngLat(coordinates).setHTML(description).addTo(map)\n        })\n\n        map.on('mouseleave', 'places', () => {\n          map.getCanvas().style.cursor = ''\n          popup.remove()\n        })\n\n        map.on('click', 'places', (e) => {\n          this.show = true\n          this.selectedProperty = JSON.parse(e.features[0].properties.property)\n        })\n\n        map.addSource('states', {\n          type: 'geojson',\n          data: 'https://docs.mapbox.com/mapbox-gl-js/assets/us_states.geojson',\n        })\n      })\n    },\n\n    removeUser(id) {\n      this.deleteUser(id)\n        .then(() => {\n          this.$toastr.s('User deleted successfully')\n        })\n        .catch((err) => {\n          this.$toastr.e(err.response.data)\n        })\n    },\n  },\n}\n</script>\n\n<style scoped></style>\n"]},"metadata":{},"sourceType":"module"}